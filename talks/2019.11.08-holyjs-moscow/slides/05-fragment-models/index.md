# 4. Fragment Models

-----

## –û—Å–Ω–æ–≤–∞ –≤ `Fragment Models` —ç—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π –∏–∑ GraphQL-–∑–∞–ø—Ä–æ—Å–∞ –ø–ª—é—Å <span class="green">–∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è</span>

-----

### `Fragment Models` –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è <br/>–æ—Ç `Response Models` —Ç–æ–ª—å–∫–æ —Ç–µ–º,

## —á—Ç–æ –ª—é–±–æ–π GraphQL-—Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —á–µ—Ä–Ω–æ–π –∫–æ—Ä–æ–±–∫–æ–π. <!-- .element: class="fragment green" -->

-----

## –¢.–µ. –≤–º–µ—Å—Ç–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —è–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤.

-----

```graphql
fragment CoreImage_data on Image {
  url
  size
}

fragment UserProfile on User {
  nickname
  avatar {
    ...CoreImage_data
  }
}

```

```typescript
export interface CoreImage {
  url: string | null;
}

export interface UserProfile {
  nickname: string;
  avatar: {
    _asCoreImageData(): CoreImage
  }
}

```

<span class="fragment" data-code-focus="9" data-code-block="1" />
<span class="fragment" data-code-focus="8" data-code-block="2" />

Note:
<!-- ```graphql
fragment UserProfile on User {
  ...AppPic
}

# Squares App fragment
fragment AppPic on HasPicture {
  squarePic: picture(style: SQUARE) {
    ...CoreImage
  }
}
```

```java
// Shared across apps
interface UserProfile {
  AppPic asAppPic();
}
interface CoreImage { ... }

// Squares App model
interface AppPic {
  SquarePic getSquarePic();

  interface SquarePic {
    CoreImage asCoreImage();
  }
}
``` -->

-----

## –ü–æ–¥ –∫–∞–∂–¥—ã–π –≤–ª–æ–∂–µ–Ω–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –µ—Å—Ç—å –º–µ—Ç–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ.

-----

### –ü—Ä–∏–º–µ—Ä –Ω–∞ React + Relay

```jsx
function CoreImage({ data }: Props) {
  return <img src={data.url} alt={data.size}></img>;
}

export default createFragmentContainer(CoreImage, {
  data: graphql`
    fragment CoreImage_data on Image {
      url
      size
    }
  `,
});

```

<span class="fragment" data-code-focus="5" data-code-block="1">
  <code>createFragmentContainer</code> ‚Äì —ç—Ç–æ HOC, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ <code>_asCoreImageData</code> –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç —Ä–æ–¥–∏—Ç–µ–ª—è
</span>

-----

<span class="fragment" style="position: absolute; width: 100%; margin-left: -50%">
  <img src="./fmodel1.svg" class="plain" />
</span>
  
<span class="fragment" style="position: absolute; width: 100%; margin-left: -50%">
  <img src="./fmodel2.svg" class="plain" />
</span>

<span class="fragment" style="position: absolute; width: 100%; margin-left: -50%">
  <img src="./fmodel3.svg" class="plain" />
</span>

<span class="fragment" style="position: absolute; width: 100%; margin-left: -50%">
  <img src="./fmodel4.svg" class="plain" />
</span>

<span class="fragment" style="position: absolute; width: 100%; margin-left: -50%">
  <img src="./fmodel5.svg" class="plain" />
</span>

<span class="fragment" style="position: absolute; width: 100%; margin-left: -50%">
  <img src="./fmodel6.svg" class="plain" />
</span>

-----

## –í—ã –≤ —Å–≤–æ–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ, –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç–µ –≤–∏–¥–µ—Ç—å "—á—É–∂–∏–µ" –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–æ—Å–µ–¥–Ω–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. <!-- .element: class="green" -->

–í Relay —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ‚Äì masking <!-- .element: class="fragment" -->

-----

## C Fragment models –≤—ã —Å–ø–æ–∫–æ–π–Ω–æ –º–æ–∂–µ—Ç–µ —É–¥–∞–ª—è—Ç—å –ø–æ–ª—è –∏–∑ —Å–≤–æ–µ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞,

## –∑–Ω–∞—è, —á—Ç–æ –±–æ–ª—å—à–µ –Ω–∏–∫—Ç–æ –Ω–µ —Å–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —ç—Ç–∏—Ö –ø–æ–ª–µ–π. <!-- .element: class="fragment orange" -->

-----

## –ï—Å–ª–∏ `UserProfile` –ø–µ–∫—É—Ç –≤ –°–®–ê, <br/> –∞ `CoreImage` –≤ –ö–∏—Ç–∞–µ <br/>‚Äì —Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–ª–æ–º–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –∫–æ–¥ –¥–æ—Ä–æ–≥–æ–≥–æ —Å—Ç–æ–∏—Ç.  

-----

## –í—ã–≤–æ–¥ –ø–æ Fragment Models

<ul>
<li class="fragment green visible" data-fragment-index="0"><del>–û–ø–µ—á–∞—Ç–∫–∏ (typos)</del> <!-- --></li>
<li class="fragment green visible" data-fragment-index="1"><del>–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–∏–ø–æ–≤–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (type safety)</del> <!-- --></li>
<li class="fragment green visible" data-fragment-index="2"><del>–ù–µ–¥–æ–ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (underfetch)</del> <!-- --></li>
<li class="fragment green visible" data-fragment-index="3"><del>–ü–æ–ª—É—á–µ–Ω–∏–µ –ª–∏—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö (overfetch)</del> <!-- --></li>
</ul>

-----

## Fragment Models

## <br/>—Å–∞–º—ã–π —Ç–æ–ø –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥! <!-- .element: class="green" -->

# <br/> üëç
