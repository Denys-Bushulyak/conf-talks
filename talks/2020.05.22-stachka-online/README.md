# ApolloClient, graphql-codegen и кодогенерация типизированных hook'ов

GraphQL статически типизированный язык общения между сервером и клиентом. И на клиент можно затащить эту типизацию, которую написали бэкендеры. Статическая типизация позволяет находить ошибки неправильного использования данных, предоставляет автоподстановку полей и переменных.

Многим фронтендерам не нравиться писать типы, многие ошибаются при их написании и использовании. Их понять можно. По-большому счету, статическая типизация нужна машинам, так почему бы машинам самим её не писать?!

В докладе речь пойдет о новом подходе кодогенерации, который стал доступен с начала 2020 года. С этим подходом ваши приложения на ApolloClient станут стабильнее, ускорится разработка, станет меньше бойлейрплейта и человеческих ошибок.

## Тезисный план (в соавторстве с Полиной Гуртовой):

- 1) Кратко про graphql и apollo
  - Показать как выглядят graphql запросы
  - Подчеркнуть типизацию (query { foo: String })
  - Apollo штука которая работает с graphql и умеет делать это для кучи платформ. Но мы будем говорить только про React
- 2) Излагаем идею
  - Graphql строго типизированный, JS тоже может быть строготипизированным, а значит... (можно генерить тайпинги из graphql запросов)
  - Это круто и защищает нас от ошибок
  - Но это куча импортов, а хороший программист -- ленивый программист. Так что пусть машина пишет код за нас
  - Показать пример с обычным apollo-хуком
  - Делаем вывод о том, что когда мы используем автотипизацию и обычные хуки мы постоянно делаем одно и то же, поэтому пусть за нас это делает инструмент
  - И этот инструмент: graphql-code-generator
- 3) Рассказываем про apollo codegen (тут можно live-coding)
  - Быстрый обзор плагинов
  - Настройки (можно поменять версию apollo за 1 секунду)
  - Запускаем как вотчер
- 4) Live demo (работа со списком заказов)
  - показываем как выглядит разметка (она уже готова, ее руками писать не надо) `const Table = () => <ul>{orders.map(p => <li>{p.name}</li>)}</ul>`
  - пишем graphql-запрос на получение списка заказов
  - правила именования
    - все названия уникальны
    - совпадают с названиями компонент
    - суффикс Query, Mutation, Subscription
    - суффикс для фрагментов – `_propName`
  - автогенерация хука, автоимпорт в VSCode
  - демонстрация статической типизации
  - работа с GraphQL-фрагментами
  - watch-режим, переименование файла
  - пример мутации
  - пример миграции на ApolloClient3

--------

Павел Черторогов
ps.kz, Архитектор информационных систем
<https://www.dropbox.com/s/22mncow425wsvwu/%20HolyJS%20%D0%BF%D0%BE%D1%80%D1%82%D1%80%D0%B5%D1%82%D1%8B%20%D1%81%D0%BF%D0%B8%D0%BA%D0%B5%D1%80%D0%BE%D0%B2-53.jpg?dl=0>

GraphQL гуру, разработчик интернет-продуктов, опенсорс-мейнтейнер. Сделал более 15 докладов о GraphQL и провел более 5 воркшопов как на клиенте, так и сервере. В веб разработке с 2001 года. Обладает обширными практическими знаниями по бэкенду, фронтенду, администрированию и построению архитектуры. В 2016 начал разработку graphql-compose (генератора GraphQL-схем). Написал много материала о GraphQL на русском – <https://github.com/nodkz/conf-talks>. В 2019 начал формировать best practice по дизайну GraphQL-схем – <https://graphql-rules.com>.

Twitter - @nodkz
Telegram - <https://t.me/graphql_ru>
GitHub - <https://github.com/nodkz>
