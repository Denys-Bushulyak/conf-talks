# ApolloClient, graphql-codegen и кодогенерация типизированных hook'ов

GraphQL статически типизированный язык общения между сервером и клиентом. И на клиент можно затащить эту типизацию, которую написали бэкендеры. Статическая типизация позволяет находить ошибки неправильного использования данных, предоставляет автоподстановку полей и переменных.

Многим фронтендерам не нравиться писать типы, многие ошибаются при их написании и использовании. Их понять можно. По-большому счету, статическая типизация нужна машинам, так почему бы машинам самим её не писать?!

В докладе речь пойдет о новом подходе кодогенерации, который стал доступен с начала 2020 года. С этим подходом ваши приложения на ApolloClient станут стабильнее, ускорится разработка, станет меньше бойлейрплейта и человеческих ошибок.

- 1) Вступление: Суперкратко про graphql и apollo (минут на 5)
  - Показать как выглядят graphql запросы и мутации
  - Подчеркнуть типизацию (query { foo: String })
  - Apollo штука которая работает с graphql и умеет делать это для кучи платформ. Но мы будем говорить только про React
- 2) Излагаем идею
  - Graphql строго типизированный, JS тоже может быть строготипизированным, а значит... (можно генерить тайпинги из graphql запросов)
  - Это круто и защищает нас от ошибок
  - Но это куча импортов, а хороший программист -- ленивый программист. Так что пусть машина пишет код за нас
  - Показать пример с обычным apollo-хуком
  - Делаем вывод о том, что когда мы используем автотипизацию и обычные хуки мы постоянно делаем одно и то же, поэтому пусть за нас это делает инструмент
  - И этот инструмент: graphql-code-generator. Тада!
- 3) Рассказываем про apollo codegen (тут можно live-coding)
  - Настройки (можно поменять версию apollo за 1 секунду)
  - Запускаем как вотчер
  - Описываем задачу (выбираем какой-нибудь пример, например отобразить список товаров список заказов/товаров) (сервер уже есть)
    - (live) показываем как выглядит разметка (она уже готова, ее руками писать не надо) `const Table = () => <ul>{procucts.map(p => <li>{p.name}</li>)}</ul>`
    - (live) (тут начинается самое интересное) Пишем graphql-запрос
    - (live) автогенерация хука (все хлопают и восхищаются)
      Дальше опционально (надо посмотреть влезем ли в лимит по времени)
    - (live) генерим мутацию
    - Рассказываем про @client. Показываем пример с client
  - Кратко о relay и relay-compiler (или как там его)
  - Сравнимаем relay-compiler и apollo-codegen
