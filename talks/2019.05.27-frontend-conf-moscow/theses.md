ApolloClient, TypeScript и "волосатый" GraphQL с фрагментами – всё что нужно для правильного статического анализа React-приложения.

В начале быстро раберу архитектуру Apollo Client'а. Расскажу что такое "волосатый" GraphQL, чем он полезен и чем отличается от RestQL. Покажу как правильно использовать GraphQL на стороне клиента в react-apollo, как писать запросы «снизу-вверх» через фрагменты (прям как в фейсбуке). Все это дело подружу с TypeScript'ом, чтоб получить суровый интерпрайзный статический анализ.

-------

1) RestQL курильщика, и GraphQL нормального человека
GraphQL должен быть “волосатым”
Смотрим схему github в https://apis.guru/graphql-voyager/ 
Если фронтендер захотел по-маленькому… запросить данные, схема должна это позволять.

2) Ущербность написания запроса целиком наверху (ей богу болячка RESTовиков)
Запрос должен быть составным и собираться снизу вверх
Накидали компонентов, собрали с них фрагменты и 80% запроса уже готово
Кто-то внизу зарефакторил компоненту чтобы отображать больше данных – вам наверху пофигу, все работает из коробки.

3) Привязываем статический анализ к компонентам
Настраиваем apollo-codegen, relay-compiler для генерации дефинишенов
Берем тайп дефинишены фрагментов и привязываем их к пропсам компонент

4) Лайфдемо:
Пишем запросы, вяжим компоненты с фрагментами, т.к. это делается в фейсбуке и Relay.
Ломаем сервер по заявкам трудящихся – cтараемся быстро найти поломанные места в клиенте
Радуемся тому, как нас контролируют машины

Возможно будет сравнение ApolloClient и Relay