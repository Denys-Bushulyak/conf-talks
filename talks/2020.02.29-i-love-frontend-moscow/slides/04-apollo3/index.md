# ApolloClient

-----

## –ß—Ç–æ —Ç–∞–∫–æ–µ ApolloClient?

- –≠—Ç–æ GraphQL-–∫–ª–∏–µ–Ω—Ç (—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∞–≥–Ω–æ—Å—Ç–∏–∫) <!-- .element: class="fragment green" -->
  - –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–µ—Ç–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å GraphQL-—Å–µ—Ä–≤–µ—Ä–æ–º <!-- .element: class="fragment" -->
  - –°–∞–º —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –°—Ç–æ—Ä –∏ –∫—ç—à–∏—Ä—É–µ—Ç –≤ –Ω–µ–º –æ—Ç–≤–µ—Ç—ã –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ <!-- .element: class="fragment" -->
  - –î–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å–æ —Å—Ç–æ—Ä–æ–º <!-- .element: class="fragment" -->
- –≠—Ç–æ –∫—É—á–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (–¥–ª—è React, Angular, Vue, Swift, Java) <!-- .element: class="fragment orange" -->
  - –û—Ç–¥–∞–µ—Ç —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å–ø–µ—Ü–∏—Ñ–∏–∫ –ø—Ä–∏–º–∏—Ç–∏–≤—ã <!-- .element: class="fragment" -->
    - –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä, —Ö—É–∫–∏, —Ö–æ–∫–∏, —Ä—É—Ç-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã <!-- .element: class="fragment" -->
    - Rerender –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –≤ —Å—Ç–æ—Ä–µ <!-- .element: class="fragment" -->
- –≠—Ç–æ —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ (TS, flow, swift, scala) <!-- .element: class="fragment red" -->

-----

## –ì–¥–µ –ê–ø–æ–ª–ª–æ –∫–ª–∏–µ–Ω—Ç –∫—Ä—É—á–µ –†–µ–¥–∞–∫—Å–∞?

–í –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ–º –ö–≠–®–ò–†–û–í–ê–ù–ò–ò –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏ —Å —Å–µ—Ä–≤–µ—Ä–Ω—ã–º –°–¢–ï–ô–¢–û–ú <!-- .element: class="green" -->

-----

### ApolloClient —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä—É–µ—Ç –∏ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Å–µ—Ä–≤–µ—Ä—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏. <!-- .element: class="green" -->

### <br/>Redux –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Ñ–æ—Ä–º—ã, –∏–≥—Ä—ã –∏ –ø—Ä...) <!-- .element: class="fragment orange" -->

### <br/>–ù–æ –Ω—É–∂–µ–Ω –ª–∏ –µ—â—ë Redux?.. –†–µ—à–∞—Ç—å –≤–∞–º! <!-- .element: class="fragment red" -->

-----

## –£ —Å–µ–±—è —è Redux –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å –º–µ—Å—è—Ü <br/>–∏ –µ—â—ë 3 –≥–æ–¥–∞ —Ç–æ–º—É –Ω–∞–∑–∞–¥ –≤—ã–ø–∏–ª–∏–ª üéâ <!-- .element: class="red" -->

- –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫—ç—à ‚Äì –≤ ApolloClient'–µ <!-- .element: class="fragment" -->
- –†–æ—É—Ç–∏–Ω–≥ ‚Äì –≤ –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π —Å—Ç—Ä–æ–∫–µ <!-- .element: class="fragment" -->
- –§–æ—Ä–º–æ—á–∫–∏ ‚Äì –≤ React-—Å—Ç–µ–π—Ç–µ –∏–ª–∏ –≤ final-forms <!-- .element: class="fragment" -->
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äì –≤ —Å–≤–æ–∏ –∫–ª–∞—Å—Å–∞—Ö EvenEmitter'–∞—Ö <!-- .element: class="fragment" -->
- –ê –±–æ–ª—å—à–µ —É –º–µ–Ω—è –Ω–µ—Ç –º–µ—Å—Ç, –∫—É–¥–∞ –±—ã Redux —Å–≥–æ–¥–∏–ª—Å—è <!-- .element: class="fragment orange" -->

-----

## ApolloClient vs Redux

![peggy](./peggy-redux-apollo.png) <!-- .element: style="max-width: 800px" -->

<small>
  <a href="https://blog.apollographql.com/reducing-our-redux-code-with-react-apollo-5091b9de9c2a">https://blog.apollographql.com/reducing-our-redux-code-with-react-apollo-5091b9de9c2a</a> by Peggy Rayzis
  <a href="https://habr.com/ru/post/331088">https://habr.com/ru/post/331088</a> –ø–µ—Ä–µ–≤–æ–¥ –æ—Ç KarafiziArthur
</small>

-----

## What we deleted <!-- .element: class="red" -->

- Matches reducer (~300 lines of code) <!-- .element: class="fragment" -->
- Data fetching action creators (~800 LOC) <!-- .element: class="fragment" -->
- Batching logic & socket updates (~750 LOC) <!-- .element: class="fragment" -->
- Local storage action creators (~1000 LOC) <!-- .element: class="fragment" -->
- Redux logic separated from UI components (~1000 LOC) <!-- .element: class="fragment" -->
- Tests with all of the above (~1000 LOC) <!-- .element: class="fragment" -->

-----

## –í —Å—É—Ö–æ–º –æ—Å—Ç–∞—Ç–∫–µ ‚Äì ApolloClient –ø—Ä–æ <!-- .element: class="green" -->

- —Å–µ—Ç—å –∏ —Å–≤—è–∑—å —Å —Å–µ—Ä–≤–µ—Ä–æ–º <!-- .element: class="fragment" -->
- –∫—ç—à/—Å—Ç–æ—Ä —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö<!-- .element: class="fragment" -->
- —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∫–æ–Ω–Ω–µ–∫—Ç–æ—Ä—ã (React –∏ –ø—Ä.)<!-- .element: class="fragment" -->
- —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (apollo-tooling) <!-- .element: class="fragment" -->

-----

## –ß—Ç–æ –≤–∞–∂–Ω–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å:

### –ê–ø–æ–ª–ª–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–µ—à–∞ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, <br/>–∞ –†–µ–¥–∞–∫—Å –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å—Ç–µ–π—Ç–∞. <!-- .element: class="fragment green" -->

-----

## –ß—Ç–æ –±—É–¥–µ—Ç –≤ ApolloClient 3?

-----

## –ù–∞ 4 —Ñ–µ–≤—Ä–∞–ª—è 2019 –ø–æ–∫–∞ –µ—â–µ –≤ BETA <!-- .element: class="orange" -->

- v3.0.0-beta.32 –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ –ø–∞—Ä—É –¥–Ω–µ–π <!-- .element: class="fragment" -->
- Ben Newman —à–∞–±–∞—à–∏—Ç 6 –¥–Ω–µ–π –≤ –Ω–µ–¥–µ–ª—é <!-- .element: class="fragment" -->

-----

## –ù–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏—è –≤ 3-—Ç—å–µ–π –≤–µ—Ä—Å–∏–∏ <!-- .element: class="orange" -->

- –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Å—Ç–æ—Ä–∞ EntityCache <!-- .element: class="fragment" -->
- Garbage collection –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–æ—Ä–æ—á–Ω–æ–π —á–∏—Å—Ç–∫–∏ –∫—ç—à–∞ <!-- .element: class="fragment" -->
- –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫—ç—à–∞/—Å—Ç–æ—Ä–∞ <!-- .element: class="fragment" -->
- –û–¥–∏–Ω –ø–∞–∫–µ—Ç –¥–ª—è –≤—Å–µ–≥–æ @apollo/client <!-- .element: class="fragment" -->
